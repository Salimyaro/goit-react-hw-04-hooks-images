{"version":3,"sources":["components/ImageGalleryItem/ImageGalleryItem.module.css","components/Modal/Modal.module.css","components/ImageGallery/ImageGallery.module.css","components/Button/Button.module.css","components/Loader/Loader.module.css","components/Searchbar/Searchbar.module.css","components/Searchbar/Searchbar.jsx","components/Modal/Modal.jsx","components/ImageGalleryItem/ImageGalleryItem.jsx","components/ImageGallery/ImageGallery.jsx","components/Button/Button.jsx","components/Loader/Loader.jsx","components/waiting.jpg","components/error.gif","services/pixabay-api.js","App.js","index.js","App.module.css"],"names":["module","exports","Searchbar","onSubmit","useState","queue","setQueue","className","s","searchbar","searchForm","event","preventDefault","type","button","label","input","autoComplete","autoFocus","placeholder","value","onChange","target","Modal","onClose","src","loading","setLoading","toggleLoadind","prev","useEffect","document","body","style","position","handleKeyDown","e","code","window","addEventListener","removeEventListener","overlay","onClick","currentTarget","modal","alt","onLoad","color","height","ImageGalleryItem","imageData","id","webformatURL","largeImageURL","openModal","setOpenModal","largeSrc","setLargeSrc","toggleModal","imageGalleryItem","image","data-largeimg","dataset","largeimg","ImageGallery","gallery","imageGallery","map","item","index","Button","Api","loader","api","fetchImages","page","fetch","then","response","ok","json","Promise","reject","Error","Status","App","setGallery","searchQueue","setSearchQueue","setPage","status","setStatus","error","setError","totalHits","setTotalHits","data","hits","catch","scrollTo","top","documentElement","scrollHeight","behavior","waiting","message","waitingImg","errorImg","length","ReactDOM","render","StrictMode","querySelector"],"mappings":"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","file":"static/js/main.35a6f17a.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGalleryItem\":\"ImageGalleryItem_imageGalleryItem__XnEYZ\",\"image\":\"ImageGalleryItem_image__3usC0\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"overlay\":\"Modal_overlay__sUWnm\",\"modal\":\"Modal_modal__R-yzO\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"imageGallery\":\"ImageGallery_imageGallery__iAR1q\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"button\":\"Button_button__2xQds\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loader\":\"Loader_loader__1TKxr\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__1cin5\",\"searchForm\":\"Searchbar_searchForm__2MrRQ\",\"button\":\"Searchbar_button__1UoPS\",\"label\":\"Searchbar_label__1LjMY\",\"input\":\"Searchbar_input__1NQi-\"};","import { useState } from 'react';\nimport s from './Searchbar.module.css';\nimport PropTypes from 'prop-types';\n\nexport default function Searchbar({ onSubmit }) {\n  const [queue, setQueue] = useState('');\n\n  const handleChange = ({ target }) => {\n    setQueue(target.value);\n  };\n\n  const handleSubmit = event => {\n    event.preventDefault();\n    onSubmit(queue);\n    setQueue('');\n  };\n\n  return (\n    <header className={s.searchbar}>\n      <form className={s.searchForm} onSubmit={handleSubmit}>\n        <button type=\"submit\" className={s.button}>\n          <span className={s.label}>Search</span>\n        </button>\n        <input\n          className={s.input}\n          type=\"text\"\n          autoComplete=\"off\"\n          autoFocus\n          placeholder=\"Search images and photos\"\n          value={queue}\n          onChange={handleChange}\n        />\n      </form>\n    </header>\n  );\n}\n\nSearchbar.propTypes = {\n  onSubmit: PropTypes.func.isRequired,\n};\n","import { useEffect, useState } from 'react';\nimport s from './Modal.module.css';\nimport Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport PropTypes from 'prop-types';\n\nexport default function Modal({ onClose, src }) {\n  const [loading, setLoading] = useState(false);\n\n  const toggleLoadind = () => {\n    setLoading(prev => !prev);\n  };\n\n  const backdropHandler = ({ target, currentTarget }) => {\n    if (target === currentTarget) {\n      onClose();\n    }\n  };\n\n  useEffect(() => {\n    document.body.style.position = 'fixed';\n    return () => {\n      document.body.style.position = 'relative';\n    };\n  });\n\n  useEffect(() => {\n    const handleKeyDown = e => {\n      if (e.code === 'Escape') {\n        onClose();\n      }\n    };\n    toggleLoadind();\n    window.addEventListener('keydown', handleKeyDown);\n    return () => {\n      window.removeEventListener('keydown', handleKeyDown);\n    };\n  }, [onClose]);\n\n  return (\n    <div className={s.overlay} onClick={backdropHandler}>\n      <img className={s.modal} src={src} alt=\"\" onLoad={toggleLoadind} />\n      {loading && <Loader type=\"BallTriangle\" color=\"#3f51b5\" height={350} />}\n    </div>\n  );\n}\n\nModal.propTypes = {\n  src: PropTypes.string.isRequired,\n  onClose: PropTypes.func.isRequired,\n};\n","import { useState } from 'react';\nimport s from './ImageGalleryItem.module.css';\nimport Modal from '../Modal';\nimport PropTypes from 'prop-types';\n\nexport default function ImageGalleryItem({\n  imageData: { id, webformatURL, largeImageURL },\n}) {\n  const [openModal, setOpenModal] = useState(false);\n  const [largeSrc, setLargeSrc] = useState(null);\n\n  const imageClickHandler = e => {\n    setLargeSrc(e.target.dataset.largeimg);\n    toggleModal();\n  };\n\n  const toggleModal = () => {\n    setOpenModal(prev => !prev);\n  };\n\n  return (\n    <>\n      <li className={s.imageGalleryItem}>\n        <img\n          src={webformatURL}\n          alt={id}\n          className={s.image}\n          data-largeimg={largeImageURL}\n          onClick={imageClickHandler}\n        />\n      </li>\n      {openModal && <Modal onClose={toggleModal} src={largeSrc} />}\n    </>\n  );\n}\n\nImageGalleryItem.propTypes = {\n  imageData: PropTypes.shape({\n    id: PropTypes.number,\n    webformatURL: PropTypes.string,\n    largeImageURL: PropTypes.string,\n  }),\n};\n","import s from './ImageGallery.module.css';\nimport ImageGalleryItem from '../ImageGalleryItem';\nimport PropTypes from 'prop-types';\n\nexport default function ImageGallery({ gallery }) {\n  return (\n    <ul className={s.imageGallery}>\n      {gallery.map((item, index) => {\n        return <ImageGalleryItem imageData={item} key={index} />;\n      })}\n    </ul>\n  );\n}\n\nImageGallery.propTypes = {\n  gallery: PropTypes.array.isRequired,\n};\n","import s from './Button.module.css';\nimport PropTypes from 'prop-types';\n\nexport default function Button({ onClick }) {\n  return (\n    <button type=\"button\" className={s.button} onClick={onClick}>\n      Load more\n    </button>\n  );\n}\n\nButton.propTypes = {\n  onClick: PropTypes.func,\n};\n","import Loader from 'react-loader-spinner';\nimport 'react-loader-spinner/dist/loader/css/react-spinner-loader.css';\nimport s from './Loader.module.css';\n\nexport default function Api() {\n  return (\n    <div className={s.loader}>\n      <Loader type=\"BallTriangle\" color=\"#3f51b5\" height={60} />\n    </div>\n  );\n}\n","export default __webpack_public_path__ + \"static/media/waiting.20c59006.jpg\";","export default __webpack_public_path__ + \"static/media/error.4efd80f6.gif\";","const API_KEY = '18969106-b552d166da3dfed7b4523ee16';\n\nfunction fetchImages(queue, page) {\n  return fetch(\n    `https://pixabay.com/api/?q=${queue}&page=${page}&key=${API_KEY}&image_type=photo&orientation=horizontal&per_page=12`,\n  ).then(response => {\n    if (response.ok) {\n      return response.json();\n    }\n    return Promise.reject(\n      new Error(`Не удалось найти картинки по запросу \"${queue}\"`),\n    );\n  });\n}\n\nconst api = {\n  fetchImages,\n};\n\nexport default api;\n","import { useEffect, useState } from 'react';\nimport s from './App.module.css';\nimport Searchbar from './components/Searchbar';\nimport ImageGallery from './components/ImageGallery';\nimport Button from './components/Button';\nimport Loader from './components/Loader';\nimport waitingImg from './components/waiting.jpg';\nimport errorImg from './components/error.gif';\nimport Api from './services/pixabay-api';\n\nconst Status = {\n  IDLE: 'idle',\n  PENDING: 'pending',\n  RESOLVED: 'resolved',\n  REJECTED: 'rejected',\n};\n\nexport default function App() {\n  const [gallery, setGallery] = useState([]);\n  const [searchQueue, setSearchQueue] = useState(null);\n  const [page, setPage] = useState(0);\n  const [status, setStatus] = useState(Status.IDLE);\n  const [error, setError] = useState(null);\n  const [totalHits, setTotalHits] = useState(null);\n\n  const formSubmitHandler = searchQueue => {\n    setSearchQueue(searchQueue);\n    setPage(1);\n    setGallery([]);\n  };\n\n  const loadMoreHandler = () => {\n    setPage(prev => prev + 1);\n  };\n\n  useEffect(() => {\n    if (!searchQueue) {\n      return;\n    }\n    setStatus(Status.PENDING);\n    Api.fetchImages(searchQueue, page)\n      .then(data => {\n        setTotalHits(data.totalHits);\n        if (data.totalHits < 1) {\n          return Promise.reject(\n            new Error(`Не удалось найти картинки по запросу ${searchQueue}`),\n          );\n        }\n        setGallery(prev => [...prev, ...data.hits]);\n        setStatus(Status.RESOLVED);\n      })\n      .catch(error => {\n        setError(error);\n        setStatus(Status.REJECTED);\n      });\n  }, [page, searchQueue]);\n\n  window.scrollTo({\n    top: document.documentElement.scrollHeight,\n    behavior: 'smooth',\n  });\n\n  return (\n    <div className={s.App}>\n      <Searchbar onSubmit={formSubmitHandler} />\n      {/* Вариант №1 */}\n      {(status === Status.IDLE || status === Status.REJECTED) && (\n        <div className={s.waiting}>\n          <p>\n            {(status === Status.IDLE && 'Waiting for queue') ||\n              (status === Status.REJECTED && error.message)}\n          </p>\n          <img\n            src={\n              (status === Status.IDLE && waitingImg) ||\n              (status === Status.REJECTED && errorImg)\n            }\n            alt=\"\"\n            className={s.image}\n          />\n        </div>\n      )}\n      {/* Вариант №2. Какой лучше? */}\n      {/* {status === Status.IDLE && (\n        <div className={s.waiting}>\n          <p> Waiting for queue</p>\n          <img src={waitingImg} alt=\"waiting\" className={s.image} />\n        </div>\n      )}\n      {status === Status.REJECTED && (\n        <div className={s.waiting}>\n          <p>{error.message}</p>\n          <img src={errorImg} alt=\"error\" className={s.image} />\n        </div>\n      )} */}\n      {(status === Status.RESOLVED || status === Status.PENDING) && (\n        <>\n          <ImageGallery gallery={gallery} />\n          {totalHits > gallery.length && <Button onClick={loadMoreHandler} />}\n          {status === Status.PENDING && <Loader />}\n        </>\n      )}\n    </div>\n  );\n}\n","import ReactDOM from 'react-dom';\nimport React from 'react';\nimport 'modern-normalize/modern-normalize.css';\n\nimport './index.css';\nimport App from './App';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.querySelector('#root'),\n);\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"App\":\"App_App__39yAa\",\"waiting\":\"App_waiting__1ZtyV\",\"image\":\"App_image__1G7As\"};"],"sourceRoot":""}